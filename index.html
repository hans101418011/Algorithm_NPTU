<!doctype html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Algorithm HW 3 - BFS & DFS</title>
	<meta name="author" content="HansChen" />
	<link rel="stylesheet" type="text/css" href="./reset.css">
	<link rel="stylesheet" type="text/css" href="./style.css">
	<script type="text/javascript" src="./d3.min.js"></script>
</head>
<body>
	<button type="button" onclick="drawG(this);">產生圖形</button>

	<div id="sketchpad"></div>
	<script>

	function node(lable,target,level,statu){
		this.lable = lable;
		this.target = target;
		this.level = level;
		this.statu = statu;
	}
	function link(source,target,value){
		this.source = source;
		this.target = target;
		this.value = value;
	}

	var nodeNum = 10;
	var gjsonObj = [];
	for (var i = 0; i < nodeNum ; i++) {
		var temp = new node(String.fromCharCode(65+i),null,-1,0);
		gjsonObj.push(temp);
	};
	var gjson = JSON.stringify(gjsonObj);
	//console.log(gjsonObj);
	//console.log(gjson);


	var ljsonObj = [];
	for(var i = 0; i < nodeNum ; i++){
		var tempArr = [];
		do{
			var t = Math.floor((Math.random() * nodeNum));
		}while(t==i);
		tempArr.push(t);

		while(Math.floor((Math.random()*10 > 7))){
			do{
				var t = Math.floor((Math.random() * 1000))%10;
			}while(t==i || tempArr.indexOf(t)!=-1);
			tempArr.push(t);
		}
		var tt;
		for (var j = 0; j < tempArr.length; j++) {
			var temp = new link(i,tempArr[j],1);
			ljsonObj.push(temp);
		}
		tempArr = [];
	}
	var ljson = JSON.stringify(ljsonObj);
	//console.log(ljsonObj);
	//console.log(ljson);

	var dataObj = {};
	dataObj.nodes = gjsonObj;
	dataObj.links = ljsonObj;
	var dataJSON = JSON.stringify(dataObj);
	console.log(dataObj);
	console.log(dataJSON);

	var tempQuery = [];
	var startNum = Math.floor((Math.random() * nodeNum));
	var startNode = String.fromCharCode(65+startNum);
	dataObj.nodes[startNum].level = 0;

	var dataBFS = dataObj;
	function BFS(){

	}





	var width = 600,
	    height = 500;

	var force = d3.layout.force()
	    .charge(-400)
	    .linkDistance(100)
	    .size([width, height]);

	var svg = d3.select("#sketchpad").append("svg")
	    .attr("width", width)
	    .attr("height", height);



		var graph = dataBFS;

	    force
	        .nodes(graph.nodes)
	        .links(graph.links)
	        .start();

	    var link = svg.selectAll(".link")
	        .data(graph.links)
	      .enter().append("line")
	        .attr("class", "link")
	        .style("stroke-width", function(d) { return Math.sqrt(d.value); });

	    var gnodes = svg.selectAll('g.nodes')
	      .data(graph.nodes)
	      .enter()
	      .append('g')
	      .classed('gnode', true);

	    var node = gnodes.append("circle")
	      .attr("class", "node")
	      .attr("r", 20)
	      .style("fill", "lightskyblue")
	      .call(force.drag);

	    var labels = gnodes.append("text")
	      .attr("font-size", "14px")
	      .attr("font-family", "monospace")
	      .attr("text-anchor", "middle")
	      .text(function(d) { return d.lable; });


	  force.on("tick", function() {
	    link.attr("x1", function(d) { return d.source.x; })
	        .attr("y1", function(d) { return d.source.y; })
	        .attr("x2", function(d) { return d.target.x; })
	        .attr("y2", function(d) { return d.target.y; });

	    gnodes.attr("transform",function(d){return 'translate('+[d.x, d.y]+')';});
	  });

	

	</script>

</body>
</html>